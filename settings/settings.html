<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KoeMoji-Go Web - 設定</title>
  <link rel="stylesheet" href="settings.css">
</head>
<body>
  <div class="settings-container">
    <header class="settings-header">
      <h1>⚙️ 設定</h1>
      <p>KoeMoji-Go Web Chrome拡張機能</p>
    </header>

    <div class="settings-content">
      <!-- OpenAI API設定 -->
      <section class="form-section">
        <h2 class="section-title">🤖 OpenAI API設定</h2>

        <div class="form-group">
          <label for="apiKey">
            APIキー
            <span class="label-description">OpenAI APIキーを入力してください</span>
          </label>
          <input
            type="password"
            id="apiKey"
            placeholder="sk-..."
            required
            pattern="sk-[A-Za-z0-9_-]{48,}"
            title="有効なOpenAI APIキーを入力してください（sk-で始まる必要があります）"
          />
        </div>

        <div class="info-box">
          <strong>APIキーの取得方法:</strong>
          <a href="https://platform.openai.com/api-keys" target="_blank" class="setup-link">
            OpenAI Platform
          </a>
          でAPIキーを作成してください。
        </div>
      </section>

      <!-- 録音設定 -->
      <section class="form-section">
        <h2 class="section-title">🎙️ 録音設定</h2>

        <div class="form-group">
          <label for="recordingDevice">
            録音デバイス
            <span class="label-description">音声をキャプチャするデバイスを選択</span>
          </label>
          <select id="recordingDevice" required>
            <option value="">デバイスを選択...</option>
          </select>
        </div>

        <div class="warning-box">
          <strong>重要:</strong> マイクとシステム音声を同時録音するには、仮想オーディオデバイスのセットアップが必要です。
          <a href="https://github.com/infoHiroki/koemoji-web/blob/main/docs/SETUP_GUIDE.md" target="_blank" class="setup-link">
            セットアップガイドを見る
          </a>
        </div>
      </section>

      <!-- 文字起こし設定 -->
      <section class="form-section">
        <h2 class="section-title">📝 文字起こし設定</h2>

        <div class="form-group">
          <label for="language">
            言語
            <span class="label-description">文字起こしする言語を選択</span>
          </label>
          <select id="language" required>
            <option value="ja">日本語</option>
            <option value="en">英語</option>
            <option value="zh">中国語</option>
            <option value="ko">韓国語</option>
            <option value="es">スペイン語</option>
            <option value="fr">フランス語</option>
            <option value="de">ドイツ語</option>
          </select>
        </div>

        <div class="form-group">
          <div class="checkbox-group">
            <input type="checkbox" id="autoSummarize">
            <label for="autoSummarize">文字起こし後に自動でAI要約を生成する</label>
          </div>
        </div>

        <div class="form-group">
          <label for="summaryModel">
            要約AIモデル
            <span class="label-description">要約に使用するOpenAI LLMモデルを選択</span>
          </label>
          <select id="summaryModel" required>
            <option value="gpt-4o-mini">GPT-4o Mini（高速・低コスト）</option>
            <option value="gpt-4o">GPT-4o（バランス型）</option>
            <option value="gpt-4-turbo">GPT-4 Turbo（高性能）</option>
          </select>
        </div>

        <div class="form-group">
          <label for="summaryPrompt">
            要約プロンプト
            <span class="label-description">AI要約生成時に使用するプロンプトをカスタマイズできます</span>
          </label>
          <textarea
            id="summaryPrompt"
            placeholder="デフォルトのプロンプトが使用されます..."
          ></textarea>
        </div>

        <div class="info-box">
          <strong>デフォルトプロンプト:</strong>
          以下の会議の文字起こしを要約してください。重要なポイント、決定事項、アクションアイテムを明確に記載してください。
        </div>
      </section>

      <!-- アクション -->
      <div class="form-actions">
        <button id="testBtn" class="btn btn-secondary">
          <span>🧪</span>
          接続テスト
        </button>
        <button id="saveBtn" class="btn btn-primary">
          <span>💾</span>
          設定を保存
        </button>
      </div>
    </div>
  </div>

  <script src="settings.js"></script>
</body>
</html>
